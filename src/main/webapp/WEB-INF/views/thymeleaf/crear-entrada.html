<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Entrada Virtual</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/mis-entradas.css}">
    <link rel="stylesheet" th:href="@{/css/menu.css}">
    <link rel="stylesheet" th:href="@{/css/fondo.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}" />


    <style>
        .form-container {
            max-width: 700px;
            margin: 30px auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
    </style>

</head>

<body class="bg-white">

    <div class="fondo-moderno"></div>

    <!-- HEADER -->
    <div th:replace="fragments/header :: header"></div>

    <!-- SIDEBAR MENU -->
    <div th:replace="fragments/sidebar :: sidebar"></div>

    <!-- MAIN -->
    <main class="container my-4">
        <div class="form-container p-4">
            <h4 class="text-center mb-3">Crear entrada virtual</h4>

            <form th:action="@{/agregar-entrada}" th:object="${entrada}" method="post" enctype="multipart/form-data"
                class="row g-3">

                <!-- Nombre artista -->
                <div class="col-md-6">
                    <label class="form-label">Nombre artista</label>
                    <input type="text" class="form-control" id="nombreRecital" th:field="*{nombreRecital}"
                        placeholder="Nombre artista">
                </div>

                <!-- Fecha -->
                <div class="col-md-6">
                    <label class="form-label">Fecha</label>
                    <input type="date" class="form-control" id="fecha" th:field="*{fecha}">
                </div>

                <!-- Lugar -->
                <div class="col-md-6">
                    <label class="form-label">Lugar</label>
                    <input type="text" class="form-control" id="lugar" th:field="*{lugar}" placeholder="Lugar">
                </div>

                <!-- Horario -->
                <div class="col-md-6">
                    <label class="form-label">Horario</label>
                    <input type="time" class="form-control" id="horario" th:field="*{horario}">
                </div>

                <!-- Secci贸n -->
                <div class="col-md-6">
                    <label class="form-label">Secci贸n</label>
                    <input type="text" class="form-control" id="seccion" th:field="*{seccion}"
                        placeholder="Campo/Platea">
                </div>

                <!-- Imagen -->
                <div class="col-md-6">
                    <label class="form-label">Agregar imagen</label>
                    <input type="file" class="form-control" id="imagenArchivo" name="imagenArchivo" accept="image/*">
                    <div class="text-muted">Formatos aceptados: JPG, PNG, JPEG.</div>
                </div>

                <!-- Bot贸n Agregar -->
                <div class="col-md-6">
                    <button type="submit" class="btn btn-primary w-100">Agregar</button>
                </div>

            </form>
        </div>

        <!-- Vista previa -->
        <div class="ticket mt-4">
            <div class="ticket-right">
                <img id="previewImagen" src="" alt="Imagen del recital" class="rounded" style="display: none;">
            </div>
            <div class="ticket-left">
                <h5 id="previewArtista">Nombre Artista</h5>
                <p><em>Lugar:</em> <span id="previewLugar">...</span></p>
                <p><em>Fecha:</em> <span id="previewFecha">--/--/----</span></p>
                <p><em>Horario:</em> <span id="previewHorario">--:--</span></p>
                <p id="previewTipo">Campo/Platea</p>
            </div>
        </div>

        <p class="mt-3 text-muted text-center">
            La entrada se va llenando en tiempo real antes de pulsar el bot贸n (agregar).
        </p>
    </main>


    <!-- FOOTER -->
    <div style="margin-top: 109px">
        <div th:replace="fragments/footer :: footer"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Script para vista previa -->

    <script>
        // Toggle sidebar
        document.getElementById("menuToggle").addEventListener("click", function () {
            document.getElementById("sidebarMenu").classList.toggle("active");
        });
        document.getElementById("menuCerrar").addEventListener("click", function () {
            document.getElementById("sidebarMenu").classList.remove("active");
        });
    </script>
    <script>
        // Actualizar texto en tiempo real
        document.getElementById("nombreRecital").addEventListener("input", e => {
            document.getElementById("previewArtista").textContent = e.target.value || "Nombre Artista";
        });
        document.getElementById("lugar").addEventListener("input", e => {
            document.getElementById("previewLugar").textContent = e.target.value || "...";
        });
        document.getElementById("fecha").addEventListener("input", e => {
            document.getElementById("previewFecha").textContent = e.target.value || "--/--/----";
        });
        document.getElementById("horario").addEventListener("input", e => {
            document.getElementById("previewHorario").textContent = e.target.value || "--:--";
        });
        document.getElementById("seccion").addEventListener("input", e => {
            document.getElementById("previewTipo").textContent = e.target.value || "Campo/Platea";
        });

        // Vista previa de imagen
        document.getElementById("imagenArchivo").addEventListener("change", e => {
            const file = e.target.files[0];
            const preview = document.getElementById("previewImagen");
            if (file) {
                const reader = new FileReader();
                reader.onload = function (ev) {
                    preview.src = ev.target.result;
                    preview.style.display = "block";
                };
                reader.readAsDataURL(file);
            } else {
                preview.src = "";
                preview.style.display = "none";
            }
        });
    </script>

    <script>
        // Toggle sidebar
        document.getElementById("menuToggle").addEventListener("click", function () {
            document.getElementById("sidebarMenu").classList.toggle("active");
        });
        document.getElementById("menuCerrar").addEventListener("click", function () {
            document.getElementById("sidebarMenu").classList.remove("active");
        });
    </script>

</body>

</html>