
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Preferencias - Diario Digital de Recitales</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Estilos -->
    <link rel="stylesheet" th:href="@{/css/fondo.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/menu.css}">
    <link rel="stylesheet" th:href="@{/css/perfil.css}">

    <style>
        /* Quitar fondo blanco de las secciones */
        .preference-box {
            border: none;
            padding: 0;
            margin-bottom: 20px;
        }

        /* CHIP BASE */
        .chip-selectable {
            display: inline-flex;
            align-items: center;
            padding: 8px 14px;
            background: white;
            border-radius: 18px;
            font-size: 14px;
            color: black;
            border: 1px solid #0A2A43;
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s, color 0.2s;
            position: relative;
            width: 100%;
            justify-content: center;
            margin-bottom: 8px;
        }

        /* Checkbox invisible */
        .chip-selectable input {
            position: absolute;
            inset: 0;
            cursor: pointer;
            opacity: 0;
        }

        /* Cuando el chip está seleccionado */
        .chip-selectable:has(input:checked) {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
            font-weight: bold;
        }
    </style>
</head>

<body>
<div class="fondo-moderno"></div>

<!-- HEADER + SIDEBAR -->
<div th:replace="fragments/header :: header"></div>
<div th:replace="fragments/sidebar :: sidebar"></div>

<main class="container my-4">
    <h3 class="mb-4">Editar Preferencias</h3>

    <form th:action="@{/guardar-preferencias}" method="post" accept-charset="UTF-8">

        <!-- Generos -->
        <div class="preference-box">
            <h5 class="mb-3">Generos</h5>
            <div class="row">
                <div class="col-md-3 mb-2" th:each="genero : ${generos}">
                    <label class="chip-selectable w-100">
                        <input type="checkbox"
                               name="generos"
                               th:value="${genero}"
                               th:checked="${generosSeleccionados.contains(genero)}">
                        <span th:text="${genero}"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Artistas -->
        <div class="preference-box">
            <h5 class="mb-3">Artistas</h5>
            <div class="row">
                <div class="col-md-3 mb-2" th:each="artista : ${artistas}">
                    <label class="chip-selectable w-100">
                        <input type="checkbox"
                               name="artistas"
                               th:value="${artista}"
                               th:checked="${artistasSeleccionados.contains(artista)}">
                        <span th:text="${artista}"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Regiones -->
        <div class="preference-box">
            <h5 class="mb-3">Regiones</h5>
            <div class="row">
                <div class="col-md-3 mb-2" th:each="region : ${regiones}">
                    <label class="chip-selectable w-100">
                        <input type="checkbox"
                               name="regiones"
                               th:value="${region}"
                               th:checked="${regionesSeleccionadas.contains(region)}">
                        <span th:text="${region}"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Epocas -->
        <div class="preference-box">
            <h5 class="mb-3">Epocas</h5>
            <div class="row">
                <div class="col-md-3 mb-2" th:each="epoca : ${epocas}">
                    <label class="chip-selectable w-100">
                        <input type="checkbox"
                               name="epocas"
                               th:value="${epoca}"
                               th:checked="${epocasSeleccionadas.contains(epoca)}">
                        <span th:text="${epoca}"></span>
                    </label>
                </div>
            </div>
        </div>

        <button class="btn btn-primary mt-3 text-center" type="submit">Guardar</button>
    </form>
</main>

<!-- FOOTER -->
<footer class="text-center py-3">
    <p class="mb-0">&copy; 2025 Diario Digital de Recitales</p>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Script menú hamburguesa -->
<script>
    document.getElementById("menuToggle").addEventListener("click", () => {
        document.getElementById("sidebarMenu").classList.add("active");
    });
    document.getElementById("menuCerrar").addEventListener("click", () => {
        document.getElementById("sidebarMenu").classList.remove("active");
    });
</script>

</body>
</html>
